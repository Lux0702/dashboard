"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7042],{74811:(e,s,a)=>{a.r(s),a.d(s,{default:()=>i});var t=a(72791),r=a(78983),l=(a(2582),a(75808));var n=a(80184);const i=()=>{const[e,s]=(0,t.useState)([]),[a,i]=(0,t.useState)([]),[o,c]=(0,t.useState)(!1),[h,d]=(0,t.useState)(""),[u,m]=(0,t.useState)(""),[g,p]=(0,t.useState)([]),[x,j]=(0,t.useState)([]),[b,y]=(0,t.useState)({title:"",categories:[],stock:0,authors:[],price:0,isbn:"",pageNumbers:"",publishedDate:"",publisher:"",language:"",description:"",image:null});(0,t.useEffect)((()=>{(async()=>{try{const e=await fetch("http://localhost:3333/api/v1/categories");if(e.ok){const s=await e.json();console.log("categoryData:",s),s&&s.data&&Array.isArray(s.data)?p(s.data.map((e=>({value:e.categoryName,label:e.categoryName})))):console.error("D\u1eef li\u1ec7u t\u1eeb API kh\xf4ng \u0111\xfang \u0111\u1ecbnh d\u1ea1ng.")}else console.error("Kh\xf4ng th\u1ec3 l\u1ea5y d\u1eef li\u1ec7u t\u1eeb API.");const s=await fetch("http://localhost:3333/api/v1/authors");if(s.ok){const e=await s.json();console.log("categoryData:",e),e&&e.data&&Array.isArray(e.data)?j(e.data.map((e=>({value:e.authorName,label:e.authorName})))):console.error("D\u1eef li\u1ec7u t\u1eeb API kh\xf4ng \u0111\xfang \u0111\u1ecbnh d\u1ea1ng.")}else console.error("Kh\xf4ng th\u1ec3 l\u1ea5y d\u1eef li\u1ec7u t\u1eeb API.")}catch(e){console.error("L\u1ed7i trong qu\xe1 tr\xecnh l\u1ea5y d\u1eef li\u1ec7u t\u1eeb API:",e)}})()}),[]);const N=e=>{const{name:s,value:a}=e.target;"authors"===s?(d(a),y((e=>({...e,[s]:Array.isArray(e[s])?e[s]:a})))):"categories"===s?(m(a),y((e=>({...e,[s]:Array.isArray(e[s])?e[s]:a})))):y((e=>({...e,[s]:Array.isArray(e[s])?e[s]:a})))},v=(e,a)=>{const t=e.map((e=>e.value)).filter(Boolean);"categories"===a?(s(e),y((e=>({...e,categories:u?[u,...t]:t})))):"authorss"===a&&(i(e),y((e=>({...e,authors:h?[h,...t]:t}))))};return(0,n.jsxs)(r.rb,{children:[(0,n.jsx)(r.b7,{xs:12,md:6,children:(0,n.jsxs)(r.xH,{className:"mb-4",children:[(0,n.jsx)(r.bn,{children:(0,n.jsx)("strong",{children:"Th\xf4ng tin s\xe1ch"})}),(0,n.jsx)(r.sl,{children:(0,n.jsxs)(r.lx,{children:[(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(r.L8,{htmlFor:"title",children:"T\u1ef1a \u0111\u1ec1"}),(0,n.jsx)(r.jO,{type:"text",id:"title",name:"title",placeholder:"T\xean s\u1ea3n ph\u1ea9m",value:b.title,onChange:e=>N(e)})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(r.L8,{htmlFor:"categories",children:"Th\u1ec3 lo\u1ea1i"}),(0,n.jsx)(l.ZP,{options:g,isMulti:!0,onChange:e=>{v(e,"categories"),s(e)},value:e,placeholder:"Ch\u1ecdn th\u1ec3 lo\u1ea1i"})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(r.L8,{htmlFor:"stock",children:"T\u1ed3n kho"}),(0,n.jsx)(r.jO,{type:"number",id:"stock",name:"stock",placeholder:"S\u1ed1 l\u01b0\u1ee3ng s\u1ea3n ph\u1ea9m",value:b.stock,onChange:e=>N(e)})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(r.L8,{htmlFor:"authors",children:"T\xe1c gi\u1ea3"}),(0,n.jsx)(r.jO,{type:"text",id:"authors",name:"authors",placeholder:"Nh\u1eadp t\xean t\xe1c gi\u1ea3",value:h,onChange:e=>N(e)}),(0,n.jsx)(l.ZP,{id:"authorss",options:x,isMulti:!0,value:a,onChange:e=>{v(e,"authorss"),i(e)},placeholder:"Ch\u1ecdn t\xe1c gi\u1ea3"})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(r.L8,{htmlFor:"price",children:"Gi\xe1 ti\u1ec1n"}),(0,n.jsx)(r.jO,{type:"number",id:"price",name:"price",placeholder:"Nh\u1eadp gi\xe1 ti\u1ec1n",value:b.price,onChange:e=>N(e)})]})]})})]})}),(0,n.jsx)(r.b7,{xs:12,md:6,children:(0,n.jsxs)(r.xH,{className:"mb-4",children:[(0,n.jsx)(r.bn,{children:(0,n.jsx)("strong",{children:"Th\xf4ng tin chi ti\u1ebft"})}),(0,n.jsx)(r.sl,{children:(0,n.jsxs)(r.lx,{children:[(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(r.L8,{htmlFor:"authors",children:"ISBS"}),(0,n.jsx)(r.jO,{type:"text",id:"isbn",name:"isbn",placeholder:"M\xe3 ISBN",value:b.isbn,onChange:e=>N(e)})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(r.L8,{htmlFor:"formFile",children:"\u1ea2nh"}),(0,n.jsx)(r.jO,{type:"file",id:"image",name:"image",accept:".png, .jpg, .jpeg",placeholder:"S\u1ed1 l\u01b0\u1ee3ng s\u1ea3n ph\u1ea9m",onChange:e=>{const s=e.target.files[0];y((e=>({...e,image:s})))}})]}),(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsxs)(r.rb,{children:[(0,n.jsxs)(r.b7,{xs:"6",className:"mb-3",children:[(0,n.jsx)(r.L8,{htmlFor:"pageNumbers",children:"S\u1ed1 trang"}),(0,n.jsx)(r.jO,{type:"text",id:"pageNumbers",name:"pageNumbers",placeholder:"Nh\u1eadp s\u1ed1 trang",value:b.pageNumbers,onChange:e=>N(e)})]}),(0,n.jsxs)(r.b7,{xs:"6",className:"mb-3",children:[(0,n.jsx)(r.L8,{htmlFor:"publishedDate",children:"Ng\xe0y xu\u1ea5t b\u1ea3n"}),(0,n.jsx)(r.jO,{type:"date",id:"publishedDate",name:"publishedDate",placeholder:"Nh\u1eadp s\u1ed1 ng\xe0y s\u1ea3n xu\u1ea5t",value:b.publishedDate,onChange:e=>N(e)})]})]})}),(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsxs)(r.rb,{children:[(0,n.jsxs)(r.b7,{xs:"6",className:"mb-3",children:[(0,n.jsx)(r.L8,{htmlFor:"publisher",children:"Nh\xe0 xu\u1ea5t b\u1ea3n"}),(0,n.jsx)(r.jO,{type:"text",id:"publisher",name:"publisher",placeholder:"Nh\u1eadp nh\xe0 xu\u1ea5t b\u1ea3n",value:b.publisher,onChange:e=>N(e)})]}),(0,n.jsxs)(r.b7,{xs:"6",className:"mb-3",children:[(0,n.jsx)(r.L8,{htmlFor:"language",children:"Ng\xf4n ng\u1eef"}),(0,n.jsx)(r.jO,{type:"text",id:"language",name:"language",placeholder:"Ng\xf4n ng\u1eef s\xe1ch",value:b.language,onChange:e=>N(e)})]})]})}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(r.L8,{htmlFor:"description",children:"M\xf4 t\u1ea3"}),(0,n.jsx)(r.PB,{rows:5,type:"text",id:"description",name:"description",placeholder:"M\xf4 t\u1ea3 s\xe1ch",value:b.description,onChange:e=>N(e)})]}),(0,n.jsx)(r.u5,{color:"primary",type:"submit",onClick:e=>(async e=>{e.preventDefault(),console.log(b);const s=localStorage.getItem("userInfo"),a=JSON.parse(s).data.accessToken,t=new FormData;for(const l in b)"categories"===l||"authors"===l?(t.append(l,JSON.stringify(b[l])),console.log(b[l])):"authorss"!==l&&t.append(l,b[l]);try{const e=await fetch("http://localhost:3333/api/v1/books/add",{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:t});if(e.ok)console.log("D\u1eef li\u1ec7u \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi th\xe0nh c\xf4ng."),c(!0);else{const s=await e.json();console.error(s.message),c(!0)}}catch(r){console.error("L\u1ed7i trong qu\xe1 tr\xecnh x\u1eed l\xfd y\xeau c\u1ea7u:",r),c(!0)}})(e),children:"Submit"})]})})]})})]})}}}]);
//# sourceMappingURL=7042.08895f2d.chunk.js.map