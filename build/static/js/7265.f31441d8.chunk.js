"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7265],{88529:(e,s,l)=>{l.r(s),l.d(s,{default:()=>j});var c=l(72791),r=l(78983),n=l(9085),o=(l(5462),l(24846)),i=l(98240),a=l(61698),t=l(17256),d=l(94293),h=l(56115),x=l(14701),m=l(23458),u=l(80184);const j=()=>{const[e,s]=(0,c.useState)([]),[l,j]=(0,c.useState)([]),[p,g]=(0,c.useState)(null),[b,y]=(0,c.useState)(!1),[f,N]=(0,c.useState)(null),[k,v]=(0,c.useState)(!1),[C,I]=(0,c.useState)(!1),[w,D]=(0,c.useState)(!1),[S,T]=(0,c.useState)(null),[A,E]=(0,c.useState)(null),[O,B]=(0,c.useState)(!1),[H,V]=(0,c.useState)(0),Z=async()=>{const e=localStorage.getItem("userInfo"),l=JSON.parse(e).data.accessToken;try{B(!0);const e=await fetch("".concat(m.C,"/admin/dashboard/users"),{method:"GET",headers:{Authorization:"Bearer ".concat(l)}});if(e.ok){const l=await e.json();s(l.data)}else console.error("Error fetching users:",e.statusText)}catch(c){console.error("Error fetching users:",c)}finally{B(!1)}};(0,c.useEffect)((()=>{Z()}),[]);const L=async()=>{const e=localStorage.getItem("userInfo"),s=JSON.parse(e).data.accessToken;try{B(!0);const e=await fetch("".concat(m.C,"/admin/blacklist"),{method:"GET",headers:{Authorization:"Bearer ".concat(s)}});if(e.ok){const s=await e.json();j(s.data)}else console.error("Error fetching blacklist:",e.statusText)}catch(l){console.error("Error fetching blacklist:",l)}finally{B(!1)}};(0,c.useEffect)((()=>{L()}),[]),(0,c.useEffect)((()=>{b||g(null)}),[b]);const M=e=>{N(e),v(!0)};return(0,u.jsxs)(r.rb,{children:[(0,u.jsx)(r.b7,{xs:12,children:(0,u.jsxs)(r.xH,{className:"mb-4",children:[(0,u.jsx)(r.bn,{children:(0,u.jsx)("strong",{children:"Danh s\xe1ch kh\xe1ch h\xe0ng"})}),(0,u.jsxs)(r.sl,{children:[(0,u.jsx)(h.Z,{defaultActiveKey:"1",type:"card",size:"large",items:[{label:"Danh s\xe1ch ng\u01b0\u1eddi d\xf9ng",key:"1",children:(0,u.jsxs)(r.Sx,{children:[(0,u.jsx)(r.V,{children:(0,u.jsxs)(r.T6,{children:[(0,u.jsx)(r.is,{scope:"col",children:"#"}),(0,u.jsx)(r.is,{scope:"col",children:"T\xean ng\u01b0\u1eddi d\xf9ng"}),(0,u.jsx)(r.is,{scope:"col",children:"Email"}),(0,u.jsx)(r.is,{scope:"col",children:"Vai tr\xf2"}),(0,u.jsx)(r.is,{scope:"col",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,u.jsx)(r.is,{scope:"col",style:{textAlign:"center"},children:"T\xe1c v\u1ee5"})]})}),(0,u.jsx)(r.NR,{children:e.map(((s,l)=>(0,u.jsxs)(r.T6,{active:p===s.userId,children:[(0,u.jsx)(r.is,{scope:"row",children:l+1}),(0,u.jsx)(r.NN,{children:s.fullName}),(0,u.jsx)(r.NN,{children:s.email}),(0,u.jsx)(r.NN,{children:s.role}),(0,u.jsx)(r.NN,{children:s.phone}),(0,u.jsxs)(r.NN,{style:{textAlign:"center"},children:[(0,u.jsx)(o.Z,{icon:i.l,size:"lg",className:"text-danger cursor-pointer icon-access",onClick:()=>{var l;l=s.userId,g(l),console.log(l),T(e.find((e=>e.userId===l))),y(!0)}}),(0,u.jsx)(o.Z,{icon:a.E,size:"lg",className:"text-primary cursor-pointer icon-access",onClick:()=>{(e=>{console.log("id blacklist:",e),N(e),I(!0)})(s.userId)}}),(0,u.jsx)(o.Z,{icon:t.N,size:"lg",className:"text-primary cursor-pointer icon-access",onClick:()=>{M(s.userId),console.log(s.userId)}})]})]},l)))})]})},{label:"Danh s\xe1ch blacklist",key:"2",children:(0,u.jsxs)(r.Sx,{children:[(0,u.jsx)(r.V,{children:(0,u.jsxs)(r.T6,{children:[(0,u.jsx)(r.is,{scope:"col",children:"#"}),(0,u.jsx)(r.is,{scope:"col",children:"T\xean ng\u01b0\u1eddi d\xf9ng"}),(0,u.jsx)(r.is,{scope:"col",children:"Email"}),(0,u.jsx)(r.is,{scope:"col",children:"Vai tr\xf2"}),(0,u.jsx)(r.is,{scope:"col",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,u.jsx)(r.is,{scope:"col",style:{textAlign:"center"},children:"T\xe1c v\u1ee5"})]})}),(0,u.jsx)(r.NR,{children:l.map(((e,s)=>(0,u.jsxs)(r.T6,{active:p===e.id,children:[(0,u.jsx)(r.is,{scope:"row",children:s+1}),(0,u.jsx)(r.NN,{children:e.userInfo.fullName}),(0,u.jsx)(r.NN,{children:e.userInfo.email}),(0,u.jsx)(r.NN,{children:e.userInfo.role}),(0,u.jsx)(r.NN,{children:e.userInfo.phone}),(0,u.jsx)(r.NN,{style:{textAlign:"center"},children:(0,u.jsx)(o.Z,{icon:d.n,size:"lg",className:"text-danger cursor-pointer icon-access",onClick:()=>{(e=>{console.log("id blacklist:",e),N(e),D(!0)})(e.id)}})})]},s)))})]})}]}),(0,u.jsxs)(r.Tk,{size:"lg",alignment:"center",visible:b,onClose:()=>{y(!1)},children:[(0,u.jsx)(r.p0,{closeButton:!0,children:(0,u.jsx)(r.fl,{children:"Th\xf4ng tin chi ti\u1ebft"})}),(0,u.jsx)(r.sD,{children:S&&(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{children:"\u1ea2nh c\xe1 nh\xe2n"}),(0,u.jsxs)("div",{className:"text-center position-relative",children:[(0,u.jsx)(r.DW,{rounded:!0,src:S.avatar,width:200,height:200,style:{objectFit:"cover",border:"1px solid rgba(0, 0, 0, 0.5)",borderRadius:"10px"}}),(0,u.jsx)("div",{className:"position-absolute bottom-0 start-50 translate-middle-x",style:{zIndex:1}})]}),(0,u.jsxs)("p",{children:["T\xean ng\u01b0\u1eddi d\xf9ng:",(0,u.jsx)(r.jO,{"aria-label":"T\u1ef1a \u0111\u1ec1",disabled:!0,value:S.fullName||""})]}),(0,u.jsx)("div",{className:"mb-3",children:(0,u.jsxs)(r.rb,{children:[(0,u.jsxs)(r.b7,{xs:"6",className:"mb-3",children:[(0,u.jsx)(r.L8,{htmlFor:"phone",children:"Email:"}),(0,u.jsx)(r.jO,{disabled:!0,type:"text",id:"phone",name:"phone",value:S.email||""})]}),(0,u.jsxs)(r.b7,{xs:"6",className:"mb-3",children:[(0,u.jsx)(r.L8,{htmlFor:"price",children:"Vai tr\xf2:"}),(0,u.jsx)(r.jO,{disabled:!0,type:"text",id:"birthday",name:"birthday",value:S.role||""})]})]})}),(0,u.jsx)("div",{className:"mb-3",children:(0,u.jsxs)(r.rb,{children:[(0,u.jsxs)(r.b7,{xs:"6",className:"mb-3",children:[(0,u.jsx)(r.L8,{htmlFor:"phone",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i:"}),(0,u.jsx)(r.jO,{disabled:!0,type:"text",id:"phone",name:"phone",value:S.phone||""})]}),(0,u.jsxs)(r.b7,{xs:"6",className:"mb-3",children:[(0,u.jsx)(r.L8,{htmlFor:"price",children:"Ng\xe0y sinh:"}),(0,u.jsx)(r.jO,{disabled:!0,type:"date",id:"birthday",name:"birthday",value:(z=S.birthday,new Date(z).toLocaleDateString("en-CA"))})]})]})}),(0,u.jsx)("div",{className:"mb-3",children:(0,u.jsxs)(r.rb,{children:[(0,u.jsxs)(r.b7,{xs:"6",className:"mb-3",children:[(0,u.jsx)(r.L8,{htmlFor:"pageNumbers",children:"Gi\u1edbi t\xednh:"}),(0,u.jsx)(r.jO,{disabled:!0,type:"text",id:"gender",name:"gender",value:S.gender})]}),(0,u.jsxs)(r.b7,{xs:"6",className:"mb-3",children:[(0,u.jsx)(r.L8,{htmlFor:"publisher",children:"\u0110i\u1ec3m t\xedch l\u0169y:"}),(0,u.jsx)(r.jO,{disabled:!0,type:"number",id:"points",name:"points",value:S.points})]})]})})]})}),(0,u.jsx)(r.Ym,{children:(0,u.jsx)(r.u5,{color:"danger",onClick:()=>{M(p)},children:"X\xf3a"})})]}),(0,u.jsxs)(r.Tk,{alignment:"center",visible:k,onClose:()=>v(!1),"aria-labelledby":"DeleteConfirmationModal",children:[(0,u.jsx)(r.p0,{closeButton:!0,children:(0,u.jsx)(r.fl,{id:"DeleteConfirmationModal",children:"X\xe1c nh\u1eadn x\xf3a"})}),(0,u.jsx)(r.sD,{children:"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a?"}),(0,u.jsxs)(r.Ym,{children:[(0,u.jsx)(r.u5,{color:"secondary",onClick:()=>{v(!1),console.log("Selected Row ID in handleDelete:",p)},children:"H\u1ee7y"}),(0,u.jsx)(r.u5,{color:"danger",onClick:()=>{(async e=>{v(!1),console.log("Selected Row ID in confirmDelete:",e);const l=localStorage.getItem("userInfo"),c=JSON.parse(l).data.accessToken;try{B(!0);const l=await fetch("".concat(m.C,"/admin/dashboard/users/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(c)}});if(l.ok){console.log("Book with ID ".concat(e," deleted successfully")),s((s=>s.filter((s=>s.userId!==e))));const c=await l.json();n.Am.success(c.message,{onClose:()=>{y(!1),N(null)}})}else{const s=await l.json();n.Am.error(s.message),console.error("Error deleting user with ID ".concat(e,":"),l.statusText)}}catch(r){n.Am.error("Error deleting user with ID ".concat(e,":"),r)}finally{B(!1)}})(p)},children:"X\xf3a"})]})]}),(0,u.jsxs)(r.Tk,{alignment:"center",visible:C,onClose:()=>I(!1),"aria-labelledby":"DeleteConfirmationModal",children:[(0,u.jsx)(r.p0,{closeButton:!0,children:(0,u.jsx)(r.fl,{id:"DeleteConfirmationModal",children:"Th\xeam v\xe0o blacklist"})}),(0,u.jsxs)(r.sD,{children:["B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n th\xeam v\xe0o blacklist ? ",(0,u.jsx)("br",{}),(0,u.jsx)(r.jO,{"aria-label":"blacklist",placeholder:"Nh\u1eadp l\xed do th\xeam v\xe0o blacklist",type:"text",id:"blacklist",name:"blacklist",onChange:e=>{const{name:s,value:l}=e.target;E(l)}})]}),(0,u.jsxs)(r.Ym,{children:[(0,u.jsx)(r.u5,{color:"secondary",onClick:()=>{I(!1),console.log("Selected Row ID in handleDelete:",p)},children:"Kh\xf4ng"}),(0,u.jsx)(r.u5,{color:"danger",onClick:()=>{(async e=>{console.log("id c\u1ea7n ad\u0111:",e),console.log("reason:",A),v(!1),console.log("Selected Row ID in confirmDelete:",e);const l=localStorage.getItem("userInfo"),c=JSON.parse(l).data.accessToken;try{B(!0);const l=await fetch("".concat(m.C,"/admin/blacklist/add"),{method:"POST",headers:{Authorization:"Bearer ".concat(c),"Content-Type":"application/json"},body:JSON.stringify({userId:e,reason:A})});if(l.ok){console.log("Book with ID ".concat(e," deleted successfully")),s((s=>s.filter((s=>s.userId!==e))));const c=await l.json();I(!1),n.Am.success(c.message,{onClose:()=>{L(),Z(),N(null)}})}else{const s=await l.json();n.Am.error(s.message),console.error("Error deleting user with ID ".concat(e,":"),l.statusText)}}catch(r){n.Am.error("Error deleting user with ID ".concat(e,":"),r)}finally{B(!1)}})(f)},children:"C\xf3"})]})]}),(0,u.jsxs)(r.Tk,{alignment:"center",visible:w,onClose:()=>D(!1),"aria-labelledby":"DeleteConfirmationModal",children:[(0,u.jsx)(r.p0,{closeButton:!0,children:(0,u.jsx)(r.fl,{id:"DeleteConfirmationModal",children:"Kh\xf4i ph\u1ee5c ng\u01b0\u1eddi d\xf9ng"})}),(0,u.jsxs)(r.sD,{children:["B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n kh\xf4i ph\u1ee5c ng\u01b0\u1eddi d\xf9ng ? ",(0,u.jsx)("br",{})]}),(0,u.jsxs)(r.Ym,{children:[(0,u.jsx)(r.u5,{color:"secondary",onClick:()=>{D(!1)},children:"H\u1ee7y"}),(0,u.jsx)(r.u5,{color:"success",onClick:()=>{(async e=>{v(!1),console.log("Selected Row ID in confirmDelete:",e);const s=localStorage.getItem("userInfo"),l=JSON.parse(s).data.accessToken;try{B(!0);const s=await fetch("".concat(m.C,"/admin/blacklist/").concat(e,"/restore"),{method:"POST",headers:{Authorization:"Bearer ".concat(l)}});if(s.ok){console.log("Book with ID ".concat(e," deleted successfully")),j((s=>s.filter((s=>s.id!==e))));const l=await s.json();D(!1),n.Am.success(l.message,{onClose:()=>{L(),N(null)}})}else{const l=await s.json();n.Am.error(l.message),console.error("Error deleting user with ID ".concat(e,":"),s.statusText)}}catch(c){n.Am.error("Error deleting user with ID ".concat(e,":"),c)}finally{B(!1)}})(f)},children:"Kh\xf4i ph\u1ee5c"})]})]})]})]})}),(0,u.jsx)(n.Ix,{position:"top-right",autoClose:2e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),(0,u.jsx)(x.Z,{spinning:O,fullscreen:!0})]});var z}},98240:(e,s,l)=>{l.d(s,{l:()=>c});var c=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M29.663,482.25l.087.087a24.847,24.847,0,0,0,17.612,7.342,25.178,25.178,0,0,0,8.1-1.345l142.006-48.172,272.5-272.5A88.832,88.832,0,0,0,344.334,42.039l-272.5,272.5L23.666,456.541A24.844,24.844,0,0,0,29.663,482.25Zm337.3-417.584a56.832,56.832,0,0,1,80.371,80.373L411.5,180.873,331.127,100.5ZM99.744,331.884,308.5,123.127,388.873,203.5,180.116,412.256,58.482,453.518Z' class='ci-primary'/>"]},94293:(e,s,l)=>{l.d(s,{n:()=>c});var c=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='464 248 464 464 48 464 48 48 264 48 264 16 16 16 16 496 496 496 496 216 464 248' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M106.12,171.135A96.274,96.274,0,0,0,96,214.364V430.545h47.782l41.181-147.564a66.953,66.953,0,0,1,64.283-48.8H304V320h38.6L494.627,168.9,342.656,16H304v88H210.182A114.4,114.4,0,0,0,106.12,171.135ZM336,136V54.7L449.373,168.758,336,281.441V202.182H249.246a99.055,99.055,0,0,0-95.105,72.2L128,368.051V214.364a64.576,64.576,0,0,1,6.879-29.2l.292-.614A82.356,82.356,0,0,1,210.182,136Z' class='ci-primary'/>"]},17256:(e,s,l)=>{l.d(s,{N:()=>c});var c=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>"]}}]);
//# sourceMappingURL=7265.f31441d8.chunk.js.map