"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6409],{91968:(e,s,c)=>{c.r(s),c.d(s,{default:()=>g});var r=c(72791),o=c(78983),a=c(56115),t=c(14701),l=c(24846),n=c(98240),i=c(17256),h=c(9085),d=(c(5462),c(23458)),u=c(80184);const g=()=>{const[e,s]=(0,r.useState)(""),[c,g]=(0,r.useState)(""),[m,x]=(0,r.useState)(null),[j,p]=(0,r.useState)(null),[y,f]=(0,r.useState)([]),[N,T]=(0,r.useState)([]),[S,C]=(0,r.useState)(null),[k,b]=(0,r.useState)(!1),[w,v]=(0,r.useState)(null),[A,E]=(0,r.useState)(!1),[I,O]=(0,r.useState)(!1),[D,H]=(0,r.useState)(0),[Z,z]=(0,r.useState)(null),[_,B]=(0,r.useState)(null),[M,V]=(0,r.useState)(!1),[J,L]=(0,r.useState)({}),R=async()=>{const e=localStorage.getItem("userInfo"),s=JSON.parse(e).data.accessToken;try{O(!0);const e=await fetch("".concat(d.C,"/categories"),{method:"GET",headers:{Authorization:"Bearer ".concat(s)}});if(e.ok){const s=await e.json();f(s.data)}else console.error("Error fetching users:",e.statusText)}catch(c){console.error("Error fetching users:",c)}finally{O(!1)}};(0,r.useEffect)((()=>{R()}),[]);const G=async()=>{const e=localStorage.getItem("userInfo"),s=JSON.parse(e).data.accessToken;try{O(!0);const e=await fetch("".concat(d.C,"/authors"),{method:"GET",headers:{Authorization:"Bearer ".concat(s)}});if(e.ok){const s=await e.json();T(s.data)}else console.error("Error fetching users:",e.statusText)}catch(c){console.error("Error fetching users:",c)}finally{O(!1)}};(0,r.useEffect)((()=>{G()}),[]),(0,r.useEffect)((()=>{k||(C(null),V(!1),s(""),g(""))}),[k]);const P=e=>{v(e),E(!0)};return(0,r.useEffect)((()=>{L(_||{})}),[_]),(0,u.jsxs)(o.rb,{children:[(0,u.jsx)(o.b7,{xs:6,children:(0,u.jsxs)(o.xH,{className:"mb-4",children:[(0,u.jsxs)(o.bn,{children:[(0,u.jsx)("strong",{children:"Th\xeam th\u1ec3 lo\u1ea1i"})," ",(0,u.jsx)("small",{children:"M\u1eb7c \u0111\u1ecbnh"})]}),(0,u.jsxs)(o.sl,{children:[m&&(0,u.jsx)(o.Gc,{color:m.color,children:m.message}),(0,u.jsxs)(o.YR,{className:"profile-input",children:[(0,u.jsx)(o.wV,{children:"Th\u1ec3 lo\u1ea1i"}),(0,u.jsx)(o.jO,{"aria-label":"categoryName",value:e,onChange:e=>s(e.target.value)})]}),(0,u.jsx)("br",{}),(0,u.jsx)(o.u5,{color:"primary",onClick:async()=>{const c=localStorage.getItem("userInfo"),r=JSON.parse(c).data.accessToken;try{const c=await fetch("".concat(d.C,"/categories/add"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({categoryName:e})});if(c.ok)x({color:"success",message:"Th\xeam th\u1ec3 lo\u1ea1i th\xe0nh c\xf4ng"}),s(""),setTimeout((()=>x(null)),1e3),R();else{const e=await c.json();x({color:"danger",message:e.message||"C\xf3 l\u1ed7i x\u1ea3y ra"}),setTimeout((()=>x(null)),2e3)}}catch(o){console.error("Error adding category:",o),x({color:"danger",message:"L\u1ed7i k\u1ebft n\u1ed1i"}),setTimeout((()=>x(null)),2e3)}},children:"Th\xeam"})]})]})}),(0,u.jsx)(o.b7,{xs:6,children:(0,u.jsxs)(o.xH,{className:"mb-4",children:[(0,u.jsxs)(o.bn,{children:[(0,u.jsx)("strong",{children:"Th\xeam t\xe1c gi\u1ea3"})," ",(0,u.jsx)("small",{children:"M\u1eb7c \u0111\u1ecbnh"})]}),(0,u.jsxs)(o.sl,{children:[j&&(0,u.jsx)(o.Gc,{color:j.color,children:j.message}),(0,u.jsxs)(o.YR,{className:"profile-input",children:[(0,u.jsx)(o.wV,{children:"T\xe1c gi\u1ea3"}),(0,u.jsx)(o.jO,{"aria-label":"authorName",value:c,onChange:e=>g(e.target.value)})]}),(0,u.jsx)("br",{}),(0,u.jsx)(o.u5,{color:"primary",onClick:async()=>{const e=localStorage.getItem("userInfo"),s=JSON.parse(e).data.accessToken;try{const e=await fetch("".concat(d.C,"/authors/add"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({authorName:c})});if(e.ok)p({color:"success",message:"Th\xeam t\xe1c gi\u1ea3 th\xe0nh c\xf4ng"}),g(""),setTimeout((()=>p(null)),1e3),G();else{const s=await e.json();p({color:"danger",message:s.message||"C\xf3 l\u1ed7i x\u1ea3y ra"}),setTimeout((()=>p(null)),1e3)}}catch(r){console.error("Error adding category:",r),p({color:"danger",message:"L\u1ed7i k\u1ebft n\u1ed1i"}),setTimeout((()=>p(null)),2e3)}},children:"Th\xeam"})]})]})}),(0,u.jsx)(o.b7,{xs:12,children:(0,u.jsxs)(o.xH,{className:"mb-4",children:[(0,u.jsxs)(o.bn,{children:[(0,u.jsx)("strong",{children:"Danh s\xe1ch"})," ",(0,u.jsx)("small",{children:"M\u1eb7c \u0111\u1ecbnh"})]}),(0,u.jsx)(o.sl,{children:(0,u.jsx)(a.Z,{defaultActiveKey:"1",type:"card",size:"large",items:[{label:"Danh s\xe1ch th\u1ec3 lo\u1ea1i",key:"1",children:(0,u.jsxs)(o.Sx,{children:[(0,u.jsx)(o.V,{children:(0,u.jsxs)(o.T6,{children:[(0,u.jsx)(o.is,{scope:"col",children:"#"}),(0,u.jsx)(o.is,{scope:"col",children:"Th\u1ec3 lo\u1ea1i"}),(0,u.jsx)(o.is,{scope:"col",children:"S\u1ed1 l\u01b0\u1ee3ng s\xe1ch"}),(0,u.jsx)(o.is,{scope:"col",style:{textAlign:"center"},children:"T\xe1c v\u1ee5"})]})}),(0,u.jsx)(o.NR,{children:y.map(((e,s)=>(0,u.jsxs)(o.T6,{active:S===e.id,children:[(0,u.jsx)(o.is,{scope:"row",children:s+1}),(0,u.jsx)(o.NN,{children:e.categoryName}),(0,u.jsx)(o.NN,{children:e.books.length}),(0,u.jsxs)(o.NN,{style:{textAlign:"center"},children:[(0,u.jsx)(l.Z,{style:{marginRight:"10px"},icon:n.l,size:"lg",className:"text-danger cursor-pointer icon-access",onClick:()=>{var s;V(!0),s=e.id,C(s),console.log(s),B(y.find((e=>e.id===s))),b(!0)}}),(0,u.jsx)(l.Z,{icon:i.N,size:"lg",className:"text-primary cursor-pointer icon-access",onClick:()=>{V(!0),P(e.id),console.log(e.id)}})]})]},s)))})]})},{label:"Danh s\xe1ch t\xe1c gi\u1ea3",key:"2",children:(0,u.jsxs)(o.Sx,{children:[(0,u.jsx)(o.V,{children:(0,u.jsxs)(o.T6,{children:[(0,u.jsx)(o.is,{scope:"col",children:"#"}),(0,u.jsx)(o.is,{scope:"col",children:"T\xe1c gi\u1ea3"}),(0,u.jsx)(o.is,{scope:"col",children:"S\u1ed1 l\u01b0\u1ee3ng s\xe1ch"}),(0,u.jsx)(o.is,{scope:"col",style:{textAlign:"center"},children:"T\xe1c v\u1ee5"})]})}),(0,u.jsx)(o.NR,{children:N.map(((e,s)=>(0,u.jsxs)(o.T6,{active:S===e.id,children:[(0,u.jsx)(o.is,{scope:"row",children:s+1}),(0,u.jsx)(o.NN,{children:e.authorName}),(0,u.jsx)(o.NN,{children:e.books.length}),(0,u.jsxs)(o.NN,{style:{textAlign:"center"},children:[(0,u.jsx)(l.Z,{style:{marginRight:"10px"},icon:n.l,size:"lg",className:"text-danger cursor-pointer icon-access",onClick:()=>{var s;V(!1),s=e.id,C(s),console.log(s),B(N.find((e=>e.id===s))),b(!0)}}),(0,u.jsx)(l.Z,{icon:i.N,size:"lg",className:"text-primary cursor-pointer icon-access",onClick:()=>{V(!0),P(e.id),console.log(e.id)}})]})]},s)))})]})}]})})]})}),(0,u.jsx)(h.Ix,{position:"top-right",autoClose:2e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),(0,u.jsx)(t.Z,{spinning:I,fullscreen:!0}),(0,u.jsxs)(o.Tk,{size:"lg",alignment:"center",visible:k,onClose:()=>{b(!1),V(!1)},children:[(0,u.jsx)(o.p0,{closeButton:!0,children:(0,u.jsx)(o.fl,{children:M?"S\u1eeda th\u1ec3 lo\u1ea1i":"S\u1eeda t\xe1c gi\u1ea3"})}),(0,u.jsxs)(o.sD,{children:[console.log(_),_&&(0,u.jsx)("div",{children:(0,u.jsxs)("p",{children:[M?"Th\u1ec3 lo\u1ea1i":"T\xe1c gi\u1ea3:",(0,u.jsx)(o.jO,{"aria-label":M?"categoryName":"authorName",name:M?"categoryName":"authorName",value:J[M?"categoryName":"authorName"]||"",onChange:e=>{const{name:s,value:c}=e.target;L((e=>({...e,[s]:c}))),z(c)}})]})})]}),(0,u.jsxs)(o.Ym,{children:[(0,u.jsx)(o.u5,{color:"success",onClick:()=>{(async e=>{const c=localStorage.getItem("userInfo"),r=JSON.parse(c).data.accessToken;console.log("cate/au",Z);try{O(!0);const c=await fetch("".concat(d.C,"/").concat(M?"categories":"authors","/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({categoryName:Z,authorName:Z})});if(c.ok){const e=await c.json();b(!1),h.Am.success(e.message),g(""),s(""),V(!1),G(),R()}else{const e=await c.json();h.Am.error(e.message)}}catch(o){console.error("Error adding category:",o),h.Am.error("L\u1ed7i k\u1ebft n\u1ed1i :",o)}finally{O(!1)}})(S)},children:"L\u01b0u"}),(0,u.jsx)(o.u5,{color:"danger",onClick:()=>{P(S)},children:"X\xf3a"})]})]}),(0,u.jsxs)(o.Tk,{alignment:"center",visible:A,onClose:()=>{E(!1),V(!1)},"aria-labelledby":"DeleteConfirmationModal",children:[(0,u.jsx)(o.p0,{closeButton:!0,children:(0,u.jsx)(o.fl,{id:"DeleteConfirmationModal",children:"X\xe1c nh\u1eadn x\xf3a"})}),(0,u.jsx)(o.sD,{children:"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a?"}),(0,u.jsxs)(o.Ym,{children:[(0,u.jsx)(o.u5,{color:"secondary",onClick:()=>{E(!1),console.log("Selected Row ID in handleDelete:",S)},children:"H\u1ee7y"}),(0,u.jsx)(o.u5,{color:"danger",onClick:()=>{(async e=>{E(!1),console.log("Selected Row ID in confirmDelete:",e);const s=localStorage.getItem("userInfo"),c=JSON.parse(s).data.accessToken;try{O(!0);const s=await fetch("".concat(d.C,"/").concat(M?"categories":"authors","/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(c)}});if(s.ok){console.log("Book with ID ".concat(e," deleted successfully")),f((s=>s.filter((s=>s.id!==e)))),T((s=>s.filter((s=>s.id!==e))));const c=await s.json();h.Am.success(c.message,{onClose:()=>{b(!1),v(null),V(!1)}})}else{const c=await s.json();h.Am.error(c.message),console.error("Error deleting user with ID ".concat(e,":"),s.statusText)}}catch(r){h.Am.error("Error deleting user with ID ".concat(e,":"),r)}finally{O(!1)}})(w)},children:"X\xf3a"})]})]})]})}},98240:(e,s,c)=>{c.d(s,{l:()=>r});var r=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M29.663,482.25l.087.087a24.847,24.847,0,0,0,17.612,7.342,25.178,25.178,0,0,0,8.1-1.345l142.006-48.172,272.5-272.5A88.832,88.832,0,0,0,344.334,42.039l-272.5,272.5L23.666,456.541A24.844,24.844,0,0,0,29.663,482.25Zm337.3-417.584a56.832,56.832,0,0,1,80.371,80.373L411.5,180.873,331.127,100.5ZM99.744,331.884,308.5,123.127,388.873,203.5,180.116,412.256,58.482,453.518Z' class='ci-primary'/>"]},17256:(e,s,c)=>{c.d(s,{N:()=>r});var r=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>"]}}]);
//# sourceMappingURL=6409.47a1505c.chunk.js.map